(function(){function F(c,a){function b(){this.constructor=c}for(var e in a)M.call(a,e)&&(c[e]=a[e]);b.prototype=a.prototype;c.prototype=new b;c.U=a.prototype}var G,H,v,z,I,x,y,A,J,u,K,B,C,D,E,L,N,M={}.hasOwnProperty;K=function(c){var a,b,e,f,d;a=[0];f=b=0;for(d=c.length;f<d;f++)e=c[f],b+=e,a.push(b);return a};u=function(c,a,b){return c<a?a:c>b?b:c};B=new (function(){function c(){this.L=[];this.S=this.result=!1}c.prototype.ka=function(a){this.S?a(this.result):this.L.push(a)};c.prototype.ha=function(){var a,
b,e,c,d;this.S=!0;this.result=void 0;c=this.L;d=[];b=0;for(e=c.length;b<e;b++)a=c[b],d.push(a(void 0));return d};return c}());E=function(){document.removeEventListener("DOMContentLoaded",E);return B.ha()};document.addEventListener("DOMContentLoaded",E);y=function(){function c(){}c.prototype.B=function(){return!1};c.prototype.K=function(){return!1};c.prototype.v=function(a,b,e){null==e&&(e=function(){});return setTimeout(function(){return e(a+","+b)},100)};c.prototype.A=function(a,b){null==b&&(b=function(){});
return b("col "+a)};return c}();x=function(c){function a(){return N=a.U.constructor.apply(this,arguments)}F(a,c);a.prototype.Z=function(b,a){return b+","+a};a.prototype.B=function(){return!0};a.prototype.K=function(){return!0};a.prototype.v=function(a,e,c){null==c&&(c=function(){});return c(this.Z(a,e))};a.prototype.A=function(a,e){null==e&&(e=function(){});return e("col "+a)};return a}(y);H=function(){function c(a){this.size=null!=a?a:100;this.data={};this.w=[]}c.prototype.Q=function(){return this.data.hasOwnProperty(void 0)};
c.prototype.get=function(a){return this.data[a]};c.prototype.set=function(a,b){var e;e=this.w.indexOf(a);0<=e&&this.w.splice(e,1);this.w.push(a);this.w.length>=this.size&&(e=this.w.shift(),delete this.data[e]);return this.data[a]=b};return c}();v=function(c){function a(a){null==a&&(a=100);this.D=new H(a);this.t={}}F(a,c);a.prototype.B=function(){return this.D.Q()};a.prototype.v=function(a,e,c){var d=this;null==c&&(c=function(){});if(this.D.Q())return c(this.D.get(void 0)(a,e));if(null!=this.t[void 0])return this.t[void 0].push([a,
e,c]);this.t[void 0]=[[a,e,c]];return this.X(function(g){var k,h,l,m;d.D.set(void 0,g);l=d.t[void 0];k=0;for(h=l.length;k<h;k++)m=l[k],a=m[0],e=m[1],c=m[2],c(g(a,e));return delete d.t[void 0]})};a.prototype.X=function(a){var e,c,d,g;g=JSON.parse(void 0);e=g[0];c=g[1];d=function(a,b){return"undefined:"+(a-e)+","+(b-c)};return window.setTimeout(function(){return a(d)},500)};a.prototype.K=function(){return!0};a.prototype.A=function(a,e){null==e&&(e=function(){});return e("col "+a)};return a}(y);J=function(c,
a){var b,e,f,d;if(c[0]>a)return 0;b=0;for(e=c.length;b+2<e;)if(f=(b+e)/2|0,d=c[f],d<a)b=f;else if(d>a)e=f;else return f;return b};z=function(){function c(){}c.prototype.H=function(a){var b,e;e=a.cells;for(b in e);a=a.m;e=[];for(b in a)e.push(void 0);return e};c.prototype.O=function(a,b){return a.textContent=b};c.prototype.J=function(a,b){return a.textContent=b};c.prototype.Y=function(a){a.textContent="NA"};c.prototype.N=function(a){a.textContent="NA"};return c}();L=function(c,a){var b,e;b=1;for(e=
0;e+b<c.length;)c[e+b]-c[e]>a?e+=1:b+=1;return b};G=function(){function c(){this.G=[]}c.prototype.bind=function(a,b,e){this.G.push([a,b,e]);return a.addEventListener(b,e)};c.prototype.la=function(){var a,b,e,c,d,g;g=this.G;c=0;for(d=g.length;c<d;c++)a=g[c],e=a[0],b=a[1],a=a[2],e.removeEventListener(b,a);this.G=[]};return c}();I=function(){function c(a,b,c,f){var d=this;this.a=a;this.k=b;this.p=c;this.f=document.createElement("div");this.f.className+=" fattable-v-scrollbar";this.d=document.createElement("div");
this.d.className+=" fattable-h-scrollbar";this.a.appendChild(this.f);this.a.appendChild(this.d);a=document.createElement("div");a.style.height="1px";a.style.width=this.k+"px";b=document.createElement("div");b.style.width="1px";b.style.height=this.p+"px";this.d.appendChild(a);this.f.appendChild(b);this.scrollTop=this.scrollLeft=0;this.d.onscroll=function(){if(!d.q)return d.scrollLeft=d.d.scrollLeft,d.o(d.scrollLeft,d.scrollTop)};this.f.onscroll=function(){if(!d.q)return d.scrollTop=d.f.scrollTop,d.o(d.scrollLeft,
d.scrollTop)};f.bind(this.a,"mousedown",function(a){if(1===a.button)return d.q=!0,d.a.className="fattable-body-container fattable-moving",d.V=d.scrollLeft+a.clientX,d.W=d.scrollTop+a.clientY});f.bind(this.a,"mouseup",function(){d.q=!1;return d.a.className="fattable-body-container"});f.bind(this.a,"mousemove",function(a){return window.setTimeout(function(){var b,c;if(d.q)return b=-a.clientX+d.V,c=-a.clientY+d.W,d.T(b,c)},0)});f.bind(this.a,"mouseout",function(a){if(d.q&&(null===a.toElement||a.toElement.parentElement.parentElement!==
d.a))return d.a.className="fattable-body-container",d.q=!1});this.ba=this.k>this.d.clientWidth?this.k-this.d.clientWidth:0;this.ca=this.p>this.f.clientHeight?this.p-this.f.clientHeight:0;a=function(a){if("mousewheel"===a.type)return d.T(d.scrollLeft-a.wheelDeltaX,d.scrollTop-a.wheelDeltaY)};f.bind(this.a,"mousewheel",a);f.bind(this.a,"DOMMouseScroll",a)}c.prototype.o=function(){};c.prototype.T=function(a,b){a=u(a,0,this.ba);b=u(b,0,this.ca);this.scrollLeft=a;this.scrollTop=b;this.d.scrollLeft=a;this.f.scrollTop=
b;return this.o(a,b)};return c}();A=function(){function c(a){var b,c=this;b=a.a;if(null==b)throw"container not specified.";if("string"===typeof b)this.a=document.querySelector(b);else if("object"===typeof b)this.a=b;else throw"Container must be a string or a dom element.";this.j(a,"painter",new z);this.j(a,"autoSetup",!0);this.j(a,"data");this.j(a,"nbRows");this.j(a,"rowHeight");this.j(a,"columnWidths");this.j(a,"rowHeight");this.j(a,"headerHeight");this.fa=this.I.length;this.a.className+=" fattable";
this.p=this.F*this.ga;this.s=K(this.I);this.k=this.s[this.s.length-1];this.m={};this.cells={};this.M=new G;this.P();this.ta&&B.ka(function(){return c.ja()})}c.prototype.j=function(a,b,c){if(null==a[b]){if(void 0===c)throw"Expected parameter <"+b+">";this[b]=c}else this[b]=a[b]};c.prototype.P=function(){this.ma=this.a.offsetWidth;this.$=this.a.offsetHeight-this.C;this.c=Math.min(L(this.s,this.ma)+2,this.I.length);this.e=(this.$/this.F|0)+2};c.prototype.aa=function(a,b){return[u(b/this.F|0,0,this.ga-
this.e),u(J(this.s,a),0,this.fa-this.c)]};c.prototype.H=function(){var a;this.M.la();null!=(a=this.pa)&&(a.o=null);this.i.H(this);this.a.innerHTML="";return this.h=this.g=null};c.prototype.ja=function(){var a,b,c,f,d,g,k,h=this;this.H();this.P();this.m={};this.cells={};this.a.innerHTML="";this.h=document.createElement("div");this.h.className+=" fattable-header-container";this.h.style.height=this.C+"px";this.r=document.createElement("div");this.r.className="fattable-viewport";this.r.style.width=this.k+
"px";this.r.style.height=this.C+"px";this.h.appendChild(this.r);this.g=document.createElement("div");this.g.className="fattable-body-container";this.g.style.top=this.C+"px";this.l=document.createElement("div");this.l.className="fattable-viewport";this.l.style.width=this.k+"px";this.l.style.height=this.p+"px";f=a=this.c;for(g=2*this.c;a<g;f=a+=1)for(c=d=this.e,k=2*this.e;d<k;c=d+=1)b=document.createElement("div"),b.b=!1,b.style.height=this.F+"px",this.l.appendChild(b),this.cells[c+","+f]=b;a=d=this.c;
for(g=2*this.c;d<g;a=d+=1)b=document.createElement("div"),b.style.height=this.C+"px",b.b=!1,this.m[a]=b,this.r.appendChild(b);this.u=this.e;this.n=this.c;this.display(0,0);this.a.appendChild(this.g);this.a.appendChild(this.h);this.g.appendChild(this.l);this.R();this.scroll=new I(this.g,this.k,this.p,this.M);return this.scroll.o=function(a,b){var d;d=h.aa(a,b);c=d[0];f=d[1];h.display(c,f);h.r.style.left=-a+"px";h.l.style.left=-a+"px";h.l.style.top=-b+"px";clearTimeout(h.ia);h.ia=setTimeout(h.R.bind(h),
200);return h.o(a,b)}};c.prototype.R=function(){var a,b,c,f,d,g,k,h,l,m=this;g=function(a){a.b&&m.data.A(f,function(b){a.b=!1;return m.i.O(a,b)})};l=[];f=k=this.n;for(h=this.n+this.c;k<h;f=k+=1)b=this.m[f],g(b),l.push(function(){var b,g,h,k=this;h=[];c=b=this.u;for(g=this.u+this.e;b<g;c=b+=1)d=c+","+f,a=this.cells[d],a.b?h.push(function(a){return k.data.v(c,f,function(b){a.b=!1;return k.i.J(a,b)})}(a)):h.push(void 0);return h}.call(this));return l};c.prototype.o=function(){};c.prototype.display=function(a,
b){this.h.style.display="none";this.g.style.display="none";this.da(b);this.ea(a);this.h.style.display="";return this.g.style.display=""};c.prototype.da=function(a){var b,c,f,d,g,k,h,l,m,n,q,r,p,s,t,w=this;m=this.u;q=a-this.n;if(0!==q){k=Math.min(Math.abs(q),this.c);for(b=p=0;p<k;b=p+=1)for(0<q?(n=this.n+b,g=a+b+this.c-k):(n=this.n+this.c-k+b,g=a+b),f=this.s[g]+"px",c=this.I[g]+"px",d=this.m[n],delete this.m[n],this.data.K(g)?this.data.A(g,function(a){d.b=!1;return w.i.O(d,a)}):d.b||(d.b=!0,this.i.Y(d)),
d.style.left=f,d.style.width=c,this.m[g]=d,r=function(a){w.data.B(h,g)?w.data.v(h,g,function(b){a.b=!1;return w.i.J(a,b)}):a.b||(a.b=!0,w.i.N(a))},h=s=m,t=m+this.e;s<t;h=s+=1)l=h+","+n,b=this.cells[l],delete this.cells[l],this.cells[h+","+g]=b,b.style.left=f,b.style.width=c,r(b);this.n=a}};c.prototype.ea=function(a){var b,c,f,d,g,k,h,l,m,n,q,r,p,s,t=this;k=this.u;h=this.n;n=a-k;if(0!==n){f=Math.min(Math.abs(n),this.e);for(b=r=0;r<f;b=r+=1)for(0<n?(l=k+b,c=a+b+this.e-f):(l=k+this.e-f+b,c=a+b),m=c*
this.F+"px",q=function(a){t.data.B(c,d)?t.data.v(c,d,function(b){a.b=!1;return t.i.J(a,b)}):a.b||(a.b=!0,t.i.N(a))},d=p=h,s=h+this.c;p<s;d=p+=1)g=l+","+d,b=this.cells[g],delete this.cells[g],this.cells[c+","+d]=b,b.style.top=m,q(b);this.u=a}};return c}();C=function(c){return new A(c)};v={ra:y,sa:A,oa:z,na:v,qa:x,bound:u};for(D in v)x=v[D],C[D]=x;window.ua=C}).call(this);
